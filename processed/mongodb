juju-log
service
unit-get --format=json
juju-log
config-get
format=json
relation-get --format=json
r
relation-set --format=json
r %s
s=%s
relation-list --format=json
r %s
apt-get -y install -qq
tcp
open-port %d/%s
tcp
close-port %d/%s
tcp
tcp
udp
pat_replace or data not defined
pat_replace must be a list of pat, replace tuples
ps -p %d -o cmd h
h --hook_name hook_name hook to call
/etc/mongodb.conf
/etc/init/mongodb.conf
/etc/mongos.list
# mongodb.conf
mkdir -p %s dbpath
chown -r mongodb:mongodb dbpath
dbpath=%s dbpath
mkdir
p
s logpath
chown
r
mongodb:mongodb logpath
logpath=%s logpath
logappend
logappend=true
bind_ip all
bind_ip = %s bind_ip
port = %d port
journal
journal=true
cpu
cpu = true
auth
auth = true
verbose
verbose = true
objcheck
objcheck = true
quota
quota = true
diaglog = %d diaglog
nocursors
nocursors = true
nohints
nohints = true
web_admin_ui
nohttpinterface = true
noscripting
noscripting = true
notablescan
notablescan = true
noprealloc
noprealloc = true
nssize default
nssize = %s nssize
mms-token disabled
mms-token = %s mms-token
mms-name disabled
mms-name = %s mms-name
mms-interval disabled
mms-interval = %s mms-interval
master self
master = true
slave = true
source = %s master
arbiter disabled
arbiter enabled
arbiter = %s arbiter
autoresync
autoresync
oplogsize default
oplogsize = %s optlogsize
opidmem default
opidmem = %s opidmem
extra_config_options none
extra_config_options
mongo
host %s
eval \
rs.initiate
rs.add(\
replset %s

replset %s
none
config /etc/mongodb.conf.*  --config /etc/mongodb.conf; fi
config /etc/mongodb.conf.*
config /etc/mongodb.conf %s; fi
replset %s
replset %s
rest
rest
rest
rest
rs.addarb(\
/var/run/mongodb/configsvr.pid
public-address
config_server_port
/var/run/mongodb/configsvr.pid
public-address
config_server_port
/var/run/mongodb/configsvr.pid
config_server_port
/var/run/mongodb/configsvr.pid
/var/run/mongodb/configsvr.pid
mkdir
p
s config_server_dbpath
mkdir
p
s config_server_logpath
mongod
configsvr
port %d config_server_port
dbpath %s config_server_dbpath
logpath %s config_server_logpath
pidfilepath /var/run/mongodb/configsvr.pid
fork
config_server_port
web_admin_ui
config_server_port
/var/run/mongodb/mongos.pid
public-address
mongos_port
/var/run/mongodb/mongos.pid
public-address
mongos_port
/var/run/mongodb/mongos.pid
/var/run/mongodb/mongos.pid
/var/run/mongodb/mongos.pid
mkdir
p
s mongos_logpath
mongos
logpath %s mongos_logpath
pidfilepath /var/run/mongodb/mongos.pid
port %d mongos_port
fork
configdb %s
mongos_port
public-address
port
mongodb stop
/var/lib/mongodb/mongod.lock
/var/lib/mongodb/mongod.lock
mongodb start
mongodb status
mongodb status
backup_directory
bind_ip
/etc/cron.d/mongodb
@daily
backup_copies backup_copies_kept
backup_directory
unique_name juju_unit_name
bind_ip
port port
/var/lib/mongodb/cronbackup.py
templates/backup.py.tpl
mongodb python-yaml
entering config_changed
config_data
disabled and stopped mongodb service
because of broken volume configuration - check
and
disabled and stopped mongodb service
config_changed_volume_apply failure
#*port\s+=\s+(\w+
port
current_mongodb_port
public-address
public_address
backups_enabled
web_admin_ui
replicaset_master auto
replicaset
replicaset_master
extra_daemon_options
replicaset_master auto
replicaset_master
replicaset_master auto
arbiter disabled
replicaset_master auto
arbiter enable
replicaset_master
s:%s port
replicaset_master
arbiter
port
web_admin_ui
port
port (\w+
config_server_port
config_server_port
port (\w+
mongos_port
mongos_port
about to leave config_changed
mongodb stop
/var/lib/mongodb/mongod.lock
public-address
port
replicaset
hostname
port
replset
type database
public-address
port
replicaset
juju_unit_name /
hostname
port
replset
install-order
type replset
public-address
port
juju_unit_name /
replicaset_master
auto
hostname
port
install-order
s:%s
hostname
port
mongo
eval
rs.add(\
s:%s
s:%s
s:%s
s:%s
public-address
config_server_port
juju_unit_name /
hostname
port
install-order
type configsvr
config_server_port
public-address
mongos_port
juju_unit_name /
hostname
port
install-order
type mongos
hostname
port
type
configsvr
adding config server: %s:%s
s:%s
s:%s
mongos_port
database
s:%s
public-address
mongos_port
sh.addshard(\
replset
sh.addshard(\
volume-map
juju_unit_name
ephemeral
/srv/juju/%s
volume-ephemeral-storage
juju_unit_name
yes yes true true
volume-ephemeral-storage is true, but
volume-map[{!r}] ->
ephemeral
volume-ephemeral-storage is false, but
no volid found for volume-map[{!r
scripts/volume-common.sh call
volume_init_and_mount %s
mount |egrep /srv/juju
dbpath
volume_init_and_mount failed, not applying changes
mongodb data dir {} not found
not applying changes
mongodb
invalid mount point from volid
not applying changes
mongodb data dir   already points
to %s, skipping storage changes
existing-symlink: to fix/avoid uid changes from
previous units, doing
chown -r mongodb:mongodb
chown -r mongodb:mongodb %s
rsync -a {}/ {}/

after-symlink: to fix/avoid uid changes from
previous units, doing
chown -r mongodb:mongodb
chown -r mongodb:mongodb
invalid volume storage configuration, not applying changes
install
config-changed
start
stop
database-relation-joined
replica-set-relation-joined
replica-set-relation-changed
configsvr-relation-joined
configsvr-relation-changed
mongos-cfg-relation-joined
mongos-cfg-relation-changed
mongos-cfg-relation-broken
mongos-relation-joined
mongos-relation-changed
mongos-relation-broken
unknown hook
sudo apt-get install "python-yaml
$backup_directory
mkdir
p
s/%s-%s.tar.gz
$unique_name /
y%m%d-%h%m%s
/usr/bin/mongodump --host 127.0.0.1:$port
tar czvf %s dump/*
