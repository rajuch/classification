precise
local:postgresql
local:postgresql-psql
test_dont_teardown_juju
test_timeout
master
hot standby
services psql units
\n\\q\n
services postgresql units
hot standby
hot-standby
psql-db-{} /
psql-db-admin
/ - -d
quiet --tuples-only --no-align --no-password
field-separator=, --file
juju ssh
sql
juju ssh
sudo pg_ctlcluster 9.1 main -force
postgresql
psql
add-relation postgresql:db psql:db
select true
postgresql
psql
add-relation postgresql:db-admin psql:db-admin
select true postgres
select not pg_is_in_recovery
postgresql
psql
add-relation postgresql:db psql:db
services postgresql units
create table token (x int
insert into token values (%d
select true from token where x=%d
remove-unit
remove-unit
select true master
select true hot standby
postgresql
psql
add-relation postgresql:db-admin psql:db-admin
postgres
services postgresql units
stop
alter role juju_replication noreplication
postgres
restart
start
remove-unit
alter role juju_replication replication
postgres
postgres
postgres
postgresql
psql
add-relation postgresql:db-admin psql:db-admin
services postgresql units
services postgresql units
public-address
alter user postgres encrypted password   postgres
dbname=postgres user=postgres password=foo host
set postgresql admin_addresses
select 1
/ /
/
y-%m-%d %h:%m:%s
/var/log/juju/{}-debug.log a
\n
rb
wb
state
db
db-admin
replication_password
wal_received_offset
following
client_relations
authorized
authorized
replication
volume-map
juju_unit_name
ephemeral
/srv/juju/%s
volume-ephemeral-storage
yes yes true true
volume-ephemeral-storage is true, but
volume-map[{!r}] ->
ephemeral
volume-ephemeral-storage is false, but
no volid found for volume-map[{!r
scripts/volume-common.sh call
volume_init_and_mount %s
error
mount |egrep /srv/juju
start.conf
auto
manual
templates/start_conf.tmpl
mode
postgres postgres
invoke-rc.d postgresql status
s/%s version cluster_name
utf8
postgresql
postgresql
pg_ctlcluster -force {version} {cluster_name
restart
postgresql
saved_config
live_config saved_config
invoke-rc.d postgresql reload
saved_config
live_config
select name, context from pg_settings
postmaster
postgresql
saved_config live_config
port.*=(.*
performance_tuning auto
free -m | grep mem | awk
effective_cache_size
effective_cache_size
smb
shared_buffers
shared_buffers
smb
shared_buffers
smb
/etc/sysctl.d/50-postgresql.conf w
kernel.sem = 250 32000 100 1024\n
kernel.shmall = %s\n
kernel.shmmax = %s\n
sysctl -p /etc/sysctl.d/50-postgresql.conf
hot_standby on
wal_level hot_standby
max_wal_senders
max_wal_senders
wal_keep_segments
wal_keep_segments
replicated_wal_keep_segments
templates/postgresql.conf.tmpl
postgres postgres
saved_config
templates/pg_ident.conf.tmpl
postgres postgres
s/32
dig +short -t cname %s
db db-admin
user
relation-id
unit
db-admin
user all
database all
db
user user
schema_user schema_user
database database
user
schema_user
database
unknown relation type
private-address
private-address
replication
private-address
database replication
user juju_replication
private-address
relation-id
unit
database postgres
user juju_replication
private-address
relation-id
unit
replication
database postgres
user juju_replication
private-address
relation-id
unit
admin_addresses
admin_addresses
admin_addresses
admin_addresses
database all
user all
private-address
templates/pg_hba.conf.tmpl
postgres postgres
db db-admin
allowed-units
backup_schedule backup_schedule
scripts_dir
backup_days backup_retention_count
templates/postgres.cron.tmpl
/etc/cron.d/postgres
recovery.conf
templates/recovery.conf.tmpl
host
password replication_password
recovery.conf
postgres postgres
passwords
passwords
passwords/%s w
passwords/%s
template1 postgres
dbname={} host={} user
dbname={} user
volume_init_and_mount failed, not applying changes
postgresql data dir {} not found
not applying changes
postgresql
version cluster_name
invalid mount point from volid
not applying changes
postgresql data dir   already points
to {}, skipping storage changes
existing-symlink: to fix/avoid uid changes from
previous units, doing
chown -r postgres:postgres
chown -r postgres:postgres %s
version
pg_version
rsync -a --exclude postmaster.pid {}/ {}/

after-symlink: to fix/avoid uid changes from
previous units, doing
chown -r postgres:postgres
chown -r postgres:postgres
invalid volume storage configuration, not applying changes
a-za-z0-9
disabled and stopped postgresql service
because of broken volume configuration - check
and
disabled and stopped postgresql service
config_changed_volume_apply failure
listen_port
exec.d/*/charm-pre-install
sh -c
state
state standalone
pg_dropcluster --stop 9.1 main
pg_createcluster --locale=  --encoding=  9.1 main
locale encoding
postgres
postgres
postgres
base_dir
backup_dir
scripts_dir
logs_dir
templates/dump-pg-db.tmpl
templates/pg_backup_job.tmpl
/dump-pg-db
/pg_backup_job
rather than
hello
hello
\\
\\
\\ aargh \u0441\u043b\u043e\u043d
\\ aargh \0441\043b\043e\043d
us-ascii
\\
\\\\
us-ascii backslashreplace
\\u
\\
u&


/
admin
schema
select rolname from pg_roles where rolname = %s
alter role
create role
s with login
superuser
nosuperuser
replication
noreplication
password %s
delete from pg_auth_members where member in
select oid from pg_roles where rolname = %s
grant %s to %s
select oid from pg_roles where rolname = %s
create role %s inherit nologin
select datname from pg_database where datname = %s
create database %s
grant all privileges on database %s to %s
grant connect on database %s to %s
relations
db-relation-joined db-relation-changed
state hot standby
database
roles
schema
listen_port
state
client_relations
db db-admin
db-admin-relation-joined db-admin-relation-changed
state hot standby
listen_port
state
all
client_relations
db db-admin
relations db
relations db
state master standalone
user
database
revoke all privileges on database %s from %s
schema
state master standalone
user
alter user %s nosuperuser
extra_archives
extra_repos_added
postgresql-%s version
postgresql-contrib-%s version
postgresql-plpython-%s version
postgresql-%s-debversion version
python-jinja2 syslinux python-psycopg2
extra-packages
replication_password
juju_replication replication_password
*:*:*
postgres
pgpassfile
pgpassfile
pgpassfile
pgpassfile
drop database if exists
authorized
recovery.conf
recovery.conf
private-address
state master
state hot standby
following
following
replication
state standalone
state
master
standalone
state failover
following
state master
state failover
state standalone
wal_received_offset
wal_received_offset
replication-relation-joined replication-relation-changed
authorized
state master
following
following
wal_received_offset
wal_received_offset
paused_at_failover
paused_at_failover
state master
juju_replication
replication_password
client_relations
db db-admin
replication_password
replication_password
following
private-address
state hot standby
following
wal_received_offset
wal_received_offset
following
paused_at_failover
select pg_xlog_replay_resume
state hot standby
following
wal_received_offset
paused_at_failover
following
client_relations replication
db db-admin
host
port listen_port
state state
select datname from pg_database
database
following
select pg_is_xlog_replay_paused
paused_at_failover
select pg_xlog_replay_pause
state failover
wal_received_offset
state
state standalone
following
following
wal_received_offset
wal_received_offset
paused_at_failover
paused_at_failover
advisory_lock_restart_key
pg_advisory_lock
pg_advisory_lock_shared
select
private-address
postgres
juju_replication
sudo -e
u postgres pg_basebackup -d
xlog --checkpoint=fast --no-password
h -p 5432 --username=juju_replication
/tmp
/etc/ssl/certs/ssl-cert-snakeoil.pem
server.crt
/etc/ssl/private/ssl-cert-snakeoil.key
server.key
pg_createcluster {} main
replication
backup_label
juju_replication pg_basebackup
select pg_is_in_recovery(), pg_last_xlog_receive_location
template1 postgres
/ /
nrpe-external-master-relation-changed
nagios
nagios
nagios
*:*:*:nagios:%s
/var/lib/nagios/.pgpass w
/
s-%s nagios_context
/var/log/nagios
/var/lib/nagios/export/service__{}_check_pgsql.cfg
/var/lib/nagios/export/
*check_pgsql.cfg
/var/lib/nagios/export/
charm_dir templates
nagios_hostname
nagios_servicegroup nagios_context
nrpe_service.tmpl
/etc/nagios/nrpe.d/check_pgsql.cfg
# check pgsql\n
command[check_pgsql]=/usr/lib/nagios/plugins/check_pgsql -p
listen_port
/etc/nagios/nrpe.d/check_pgsql_backups.cfg
/backups.log
# check pgsql backups\n
/etc/init.d/nagios-nrpe-server
nagios-nrpe-server
version
cluster_name
/var/lib/postgresql
/usr/lib/postgresql bin
/etc/postgresql
postgresql.conf
pg_ident.conf
pg_hba.conf
/etc/cron.d/postgresql
/var/run/postgresql
scripts
backup_dir
backups
logs
master slave replication
local_state.pickle
y%m%d
s.%s.dump
/usr/bin/pg_dump
u postgres
exclude-schema=_sl
format=c
blobs
gzip
gz
compress=0
| gzip -c%d
bzip2
bz2
compress=0
| bzip2 -c%d
postgres
compress=%d
file=%s
compress=0
file=%s
s already exists. skipping
failed to backup %s (%d
backed up %s (%0.2fmb
usage: %prog [options] database [database
v --verbose verbose
count
q --quiet quiet
count
d --dir backup_dir
/var/lib/postgres/backups
z --compression compression_cmd
gzip
l --compression-level
compression_level
must specify at least one database
incorrect --dir. %s does not exist or is not a directory
gzip bzip2 postgres none
the compression command must be one of
the compression level must be between 1 and 9: %s
pgbackup
asctime)s %(levelname)s %(message)s
